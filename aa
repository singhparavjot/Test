trigger:
- main

pool:
  name: SelfHostedAgentPool  # Replace with your self-hosted agent pool

variables:
  tableauServer: 'http://<your-tableau-server-ip>'
  tableauUsername: $(TableauUser)  # Stored securely in pipeline secrets
  tableauPassword: $(TableauPass)  # Stored securely in pipeline secrets

steps:
- script: |
    echo "Starting deployment process..."
    tabcmd login -s $(tableauServer) -u $(tableauUsername) -p $(tableauPassword)

    echo "Exporting workbook from development site..."
    tabcmd get "/workbooks/<workbook-name>.twbx" -f dev_workbook.twbx

    echo "Publishing workbook to production site..."
    tabcmd publish "dev_workbook.twbx" --project "Production Project" --name "<workbook-name>" --overwrite

    tabcmd logout
  displayName: 'Deploy Workbook from Dev to Prod'




##############



trigger:
- main

pool:
  vmImage: 'windows-latest'

steps:
- script: |
    curl -O https://your-secure-location/tabcmd-installer.exe
    start /wait tabcmd-installer.exe /quiet
  displayName: 'Install Tabcmd'

- script: |
    tabcmd --version
    echo "Tabcmd installed successfully"
  displayName: 'Verify Tabcmd Installation'

- script: |
    tabcmd login -s http://<your-tableau-server> -u $(TableauUser) -p $(TableauPass)
    tabcmd publish "path_to_workbook.twbx" --project "Production Project"
    tabcmd logout
  displayName: 'Run Tabcmd Commands'

